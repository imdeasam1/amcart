# Node.js with React
# Build a Node.js project that uses React.
# Add steps that analyze code, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/javascript

trigger:
- Master

pool:
  vmImage: ubuntu-latest

steps:
- task: NodeTool@0
  inputs:
    checkLatest: True
  displayName: 'Install Node.js'

- script: |
    sudo apt-get remove nodejs
    sudo apt-get purge nodejs
    sudo apt-get autoremove
    sudo apt-get remove npm
    curl -sL https://deb.nodesource.com/setup_18.x
    sudo apt install nodejs
    echo "Check version"
    which node
    echo "Node Version: " 
    sudo node -v
    echo "NPM Version: " 
    sudo npm -v
    npm install
    npm run build

  displayName: 'npm install and build'
